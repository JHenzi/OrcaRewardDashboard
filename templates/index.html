<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solana Rewards Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(168, 85, 247, 0.4); }
      50% { box-shadow: 0 0 30px rgba(168, 85, 247, 0.8); }
    }
    .pulse-glow {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    @keyframes shimmer {
      0% { background-position: -200px 0; }
      100% { background-position: 200px 0; }
    }
    .shimmer {
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
      background-size: 200px 100%;
      animation: shimmer 2s infinite;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }
    /* Custom Scrollbar Styling */
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #1f2937;
      border-radius: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #4b5563;
      border-radius: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #6b7280;
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
  <!-- Navigation Header -->
  <nav class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
    <div class="container mx-auto px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <a href="/" class="flex items-center space-x-4">
            <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center">
              <span class="text-2xl">üêã</span>
            </div>
            <div>
              <h1 class="text-xl font-bold text-white">Orca Tracker</h1>
              <p class="text-xs text-gray-400">Solana Rewards & Trading</p>
            </div>
          </a>
        </div>
        <div class="flex items-center space-x-4">
          <a href="/" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition text-sm font-medium">
            Home
          </a>
          <a href="/orca" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 rounded-lg transition text-sm font-medium">
            Rewards
          </a>
          <a href="/sol-tracker" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition text-sm font-medium">
            SOL Tracker
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container mx-auto px-6 py-8">
    <div class="max-w-6xl mx-auto space-y-6 fade-in">
    <!-- Hero Metrics Section -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 fade-in">
      <!-- Total Rewards Card -->
      <div class="bg-gradient-to-br from-purple-600 via-blue-600 to-green-600 p-8 rounded-2xl shadow-2xl pulse-glow relative overflow-hidden">
        <div class="shimmer absolute inset-0 opacity-30"></div>
        <div class="relative z-10 text-center">
          <h3 class="text-2xl font-bold text-white mb-2 tracking-wide">üí∞ TOTAL VALUE COLLECTED üí∞</h3>
          <p class="text-6xl font-black text-white mb-4 drop-shadow-lg">${{ '%.2f'|format(total_usd) }}</p>
          <p class="text-sm text-white/80">Tracking since {{ since_date }}</p>
        </div>
      </div>

      <!-- SOL Rewards Card -->
      <div class="bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-purple-500 transition">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-sm font-medium text-gray-400 uppercase tracking-wide">SOL Collected</h3>
          <span class="text-2xl">ü™ô</span>
        </div>
        <p class="text-3xl font-bold text-purple-400 mb-2">{{ '%.4f'|format(sol) }} SOL</p>
        <p class="text-sm text-gray-400">‚âà ${{ '%.2f'|format(sol * sol_price) }} USD</p>
      </div>

      <!-- USDC Rewards Card -->
      <div class="bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-green-500 transition">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-sm font-medium text-gray-400 uppercase tracking-wide">USDC Collected</h3>
          <span class="text-2xl">üíµ</span>
        </div>
        <p class="text-3xl font-bold text-green-400 mb-2">{{ '%.2f'|format(usdc) }} USDC</p>
        <p class="text-sm text-gray-400">‚âà ${{ '%.2f'|format(usdc) }} USD</p>
      </div>
    </div>

    <!-- Quick Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 fade-in">
      <!-- Current SOL Price -->
      <div class="bg-gray-800 border border-gray-700 rounded-xl p-6">
        <div class="flex items-center justify-between mb-3">
          <h4 class="text-sm text-gray-400">SOL Price</h4>
          <span class="text-xl">üìà</span>
        </div>
        <p class="text-2xl font-bold text-yellow-400">${{ '%.2f'|format(sol_price) }}</p>
        <div class="mt-2 flex space-x-2 text-xs">
          <span class="px-2 py-1 rounded {{ 'bg-green-900 text-green-300' if sol_deltas.hour > 1 else 'bg-red-900 text-red-300' }}">
            {{ '%.1f'|format((sol_deltas.hour - 1) * 100) }}% 1h
          </span>
          <span class="px-2 py-1 rounded {{ 'bg-green-900 text-green-300' if sol_deltas.day > 1 else 'bg-red-900 text-red-300' }}">
            {{ '%.1f'|format((sol_deltas.day - 1) * 100) }}% 24h
          </span>
        </div>
        <a href="https://www.livecoinwatch.com/price/Solana-SOL" target="_blank" class="mt-3 inline-block text-xs text-blue-400 hover:text-blue-300">
          View on Livecoinwatch ‚Üí
        </a>
      </div>

      <!-- Collection Analytics -->
      <div class="bg-gray-800 border border-gray-700 rounded-xl p-6">
        <div class="flex items-center justify-between mb-3">
          <h4 class="text-sm text-gray-400">Sessions</h4>
          <span class="text-xl">üìä</span>
        </div>
        <p class="text-2xl font-bold text-blue-400">{{ analytics.redemption_frequency|length }}</p>
        <p class="text-xs text-gray-500 mt-1">Total collections</p>
      </div>

      <!-- Daily Average -->
      <div class="bg-gray-800 border border-gray-700 rounded-xl p-6">
        <div class="flex items-center justify-between mb-3">
          <h4 class="text-sm text-gray-400">Daily Avg</h4>
          <span class="text-xl">üìÖ</span>
        </div>
        <p class="text-2xl font-bold text-green-400">
          {% if analytics.daily_earnings %}
            {% set total_earnings = analytics.daily_earnings | sum(attribute=3) %}
            {% set days_count = analytics.daily_earnings | length %}
            ${{ '%.2f'|format(total_earnings / days_count) }}
          {% else %}
            $0.00
          {% endif %}
        </p>
        <p class="text-xs text-gray-500 mt-1">Per day</p>
      </div>

      <!-- Avg Days Between -->
      <div class="bg-gray-800 border border-gray-700 rounded-xl p-6">
        <div class="flex items-center justify-between mb-3">
          <h4 class="text-sm text-gray-400">Frequency</h4>
          <span class="text-xl">‚è±Ô∏è</span>
        </div>
        <p class="text-2xl font-bold text-purple-400">{{ '%.1f'|format(analytics.avg_days_between_collections) }}</p>
        <p class="text-xs text-gray-500 mt-1">Days between</p>
      </div>
    </div>

    <!-- Monthly Summary -->
    <div class="bg-gray-800 border border-gray-700 rounded-xl p-6 mb-8 fade-in">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-bold text-white flex items-center space-x-2">
          <span>üìÖ</span>
          <span>Monthly Summary</span>
        </h2>
        <span class="text-sm text-gray-400">Updated {{ since_date }}</span>
      </div>

      <div class="overflow-x-auto rounded-xl border border-gray-700">
        <table class="min-w-full text-sm divide-y divide-gray-700">
          <thead class="bg-gray-700 text-gray-300 uppercase text-xs tracking-wider">
            <tr>
              <th scope="col" class="px-6 py-3 text-left font-semibold">Month</th>
              <th scope="col" class="px-6 py-3 text-right font-semibold">Total USD</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-700">
            {% for item in monthly_summary %}
            <tr class="hover:bg-gray-700 transition-colors duration-200">
              <td class="px-6 py-3 font-medium text-gray-200">
                {{ item.month }}
              </td>
              <td class="px-6 py-3 text-right font-semibold text-green-400">
                ${{ '%.2f'|format(item.usd_value) }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Optional: Summary footer with total -->
      {% set total_monthly = monthly_summary | sum(attribute='usd_value') %}
      <div class="mt-4 flex justify-end">
        <div class="text-right">
          <p class="text-sm text-gray-400">Total All Months</p>
          <p class="text-lg font-bold text-green-400">
            ${{ '%.2f'|format(total_monthly) }}
          </p>
        </div>
      </div>
    </div>

    <!-- Daily Rewards Section -->
    <div class="bg-gray-800 border border-gray-700 rounded-xl p-6 mb-8 fade-in">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-bold text-white flex items-center space-x-2">
          <span>üíµ</span>
          <span>Daily Rewards Timeline</span>
        </h2>
        <div class="flex items-center space-x-4">
          <p class="text-sm text-gray-400">Since {{ since_date }}</p>
          {% set total_daily = daily_summary | sum(attribute='usd_value') %}
          {% set avg_daily = total_daily / (daily_summary | length) if daily_summary | length > 0 else 0 %}
          <div class="text-right">
            <p class="text-xs text-gray-500">Avg/Day</p>
            <p class="text-sm font-semibold text-emerald-400">${{ '%.2f'|format(avg_daily) }}</p>
          </div>
        </div>
      </div>

      <!-- Scrollable Card Grid -->
      <div class="max-h-96 overflow-y-auto pr-2 space-y-3 custom-scrollbar">
        {% for row in daily_summary %}
        <div class="flex items-center justify-between p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg border border-gray-600/50 transition-all duration-200 hover:border-purple-500/50 group">
          <!-- Date Section -->
          <div class="flex items-center space-x-4 flex-1">
            <div class="flex-shrink-0 w-20 text-center">
              {% set day_parts = row.day.split('-') %}
              <div class="text-xs text-gray-400 uppercase tracking-wider">{{ day_parts[1] }}/{{ day_parts[2] }}</div>
              <div class="text-xs text-gray-500">{{ day_parts[0] }}</div>
            </div>
            <div class="flex-1">
              <div class="text-sm text-gray-300 font-medium">
                {% if row.usd_value > 5.00 %}
                  üéâ Excellent Day
                {% elif row.usd_value > 2.00 %}
                  ‚ú® Good Day
                {% elif row.usd_value > 1.00 %}
                  üí∞ Active Day
                {% else %}
                  üìä Standard Day
                {% endif %}
              </div>
              <div class="text-xs text-gray-500 mt-0.5">{{ row.day }}</div>
            </div>
          </div>
          
          <!-- Value Section -->
          <div class="flex items-center space-x-3">
            {% if row.usd_value > 5.00 %}
              <div class="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-500 rounded-lg shadow-lg group-hover:shadow-xl transition-shadow">
                <p class="text-lg font-bold text-white">${{ '%.2f'|format(row.usd_value) }}</p>
              </div>
            {% elif row.usd_value > 2.00 %}
              <div class="px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-lg shadow-md group-hover:shadow-lg transition-shadow">
                <p class="text-lg font-bold text-white">${{ '%.2f'|format(row.usd_value) }}</p>
              </div>
            {% elif row.usd_value > 1.00 %}
              <div class="px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-500 rounded-lg shadow-sm group-hover:shadow-md transition-shadow">
                <p class="text-lg font-bold text-white">${{ '%.2f'|format(row.usd_value) }}</p>
              </div>
            {% else %}
              <div class="px-4 py-2 bg-gray-600 rounded-lg border border-gray-500">
                <p class="text-lg font-semibold text-gray-200">${{ '%.2f'|format(row.usd_value) }}</p>
              </div>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- Summary Footer -->
      {% set total_daily = daily_summary | sum(attribute='usd_value') %}
      <div class="mt-6 pt-6 border-t border-gray-700 flex justify-between items-center">
        <div class="flex items-center space-x-6">
          <div>
            <p class="text-xs text-gray-500 mb-1">Total Days</p>
            <p class="text-sm font-semibold text-gray-300">{{ daily_summary | length }}</p>
          </div>
          <div>
            <p class="text-xs text-gray-500 mb-1">Total Collected</p>
            <p class="text-lg font-bold text-green-400">${{ '%.2f'|format(total_daily) }}</p>
          </div>
        </div>
        <div class="text-right">
          <p class="text-xs text-gray-500 mb-1">Best Day</p>
          {% set best_value = daily_summary | map(attribute='usd_value') | max %}
          <p class="text-sm font-semibold text-emerald-400">${{ '%.2f'|format(best_value) }}</p>
        </div>
      </div>
    </div>
  </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 border-t border-gray-700 mt-12">
    <div class="container mx-auto px-6 py-6">
      <div class="flex items-center justify-between text-sm text-gray-400">
        <p>Orca Redemption Tracker v1.0</p>
        <p>Tracking since {{ since_date }}</p>
      </div>
    </div>
  </footer>
</body>
</html>